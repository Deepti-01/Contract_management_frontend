{"ast":null,"code":"import { create } from 'zustand';\nexport const useContractStore = create((set, get) => ({\n  blueprints: [],\n  contracts: [],\n  addBlueprint: (name, fields) => {\n    const now = new Date();\n    const blueprint = {\n      id: Date.now().toString(),\n      name,\n      createdAt: now,\n      fields\n    };\n    set(state => ({\n      blueprints: [...state.blueprints, blueprint]\n    }));\n    return blueprint;\n  },\n  getBlueprint: id => get().blueprints.find(bp => bp.id === id),\n  createContract: (name, blueprintId) => {\n    const blueprint = get().getBlueprint(blueprintId);\n    if (!blueprint) {\n      return undefined;\n    }\n    const now = new Date();\n    const contract = {\n      id: Date.now().toString(),\n      name,\n      blueprintId,\n      blueprintName: blueprint.name,\n      fields: blueprint.fields.map(field => {\n        const contractField = {\n          fieldId: field.id,\n          fieldLabel: field.label,\n          fieldType: field.type,\n          value: field.type === 'CHECKBOX' ? false : ''\n        };\n        return contractField;\n      }),\n      status: 'CREATED',\n      createdAt: now,\n      updatedAt: now\n    };\n    set(state => ({\n      contracts: [...state.contracts, contract]\n    }));\n    return contract;\n  },\n  updateContractField: (contractId, fieldId, value) => {\n    set(state => {\n      const contracts = state.contracts.map(contract => {\n        if (contract.id !== contractId) {\n          return contract;\n        }\n        if (contract.status === 'LOCKED' || contract.status === 'REVOKED') {\n          return contract;\n        }\n        const fields = contract.fields.map(field => field.fieldId === fieldId ? {\n          ...field,\n          value\n        } : field);\n        return {\n          ...contract,\n          fields,\n          updatedAt: new Date()\n        };\n      });\n      return {\n        contracts\n      };\n    });\n  },\n  updateContractStatus: (contractId, status) => {\n    set(state => {\n      const order = ['CREATED', 'APPROVED', 'SENT', 'SIGNED', 'LOCKED'];\n      const contracts = state.contracts.map(contract => {\n        if (contract.id !== contractId) {\n          return contract;\n        }\n        if (contract.status === 'LOCKED' || contract.status === 'REVOKED') {\n          return contract;\n        }\n        if (status === 'REVOKED') {\n          const allowed = contract.status === 'CREATED' || contract.status === 'SENT';\n          if (!allowed) {\n            return contract;\n          }\n          return {\n            ...contract,\n            status,\n            updatedAt: new Date()\n          };\n        }\n        const currentIndex = order.indexOf(contract.status);\n        const nextIndex = order.indexOf(status);\n        const isNextStep = nextIndex === currentIndex + 1;\n        if (!isNextStep) {\n          return contract;\n        }\n        return {\n          ...contract,\n          status,\n          updatedAt: new Date()\n        };\n      });\n      return {\n        contracts\n      };\n    });\n  },\n  getContract: id => get().contracts.find(ct => ct.id === id),\n  getContractsByStatus: status => get().contracts.filter(ct => ct.status === status)\n}));","map":{"version":3,"names":["create","useContractStore","set","get","blueprints","contracts","addBlueprint","name","fields","now","Date","blueprint","id","toString","createdAt","state","getBlueprint","find","bp","createContract","blueprintId","undefined","contract","blueprintName","map","field","contractField","fieldId","fieldLabel","label","fieldType","type","value","status","updatedAt","updateContractField","contractId","updateContractStatus","order","allowed","currentIndex","indexOf","nextIndex","isNextStep","getContract","ct","getContractsByStatus","filter"],"sources":["D:/DUBassessment/src/store/contractStore.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport type {\r\n  Blueprint,\r\n  Contract,\r\n  ContractField,\r\n  ContractStatus,\r\n  Field,\r\n} from '../types';\r\n\r\ninterface ContractStoreState {\r\n  blueprints: Blueprint[];\r\n  contracts: Contract[];\r\n  addBlueprint: (name: string, fields: Field[]) => Blueprint;\r\n  getBlueprint: (id: string) => Blueprint | undefined;\r\n  createContract: (name: string, blueprintId: string) => Contract | undefined;\r\n  updateContractField: (\r\n    contractId: string,\r\n    fieldId: string,\r\n    value: string | boolean,\r\n  ) => void;\r\n  updateContractStatus: (contractId: string, status: ContractStatus) => void;\r\n  getContract: (id: string) => Contract | undefined;\r\n  getContractsByStatus: (status: ContractStatus) => Contract[];\r\n}\r\n\r\nexport const useContractStore = create<ContractStoreState>((set, get) => ({\r\n  blueprints: [],\r\n  contracts: [],\r\n\r\n  addBlueprint: (name, fields) => {\r\n    const now = new Date();\r\n    const blueprint: Blueprint = {\r\n      id: Date.now().toString(),\r\n      name,\r\n      createdAt: now,\r\n      fields,\r\n    };\r\n    set((state) => ({ blueprints: [...state.blueprints, blueprint] }));\r\n    return blueprint;\r\n  },\r\n\r\n  getBlueprint: (id) => get().blueprints.find((bp) => bp.id === id),\r\n\r\n  createContract: (name, blueprintId) => {\r\n    const blueprint = get().getBlueprint(blueprintId);\r\n    if (!blueprint) {\r\n      return undefined;\r\n    }\r\n    const now = new Date();\r\n    const contract: Contract = {\r\n      id: Date.now().toString(),\r\n      name,\r\n      blueprintId,\r\n      blueprintName: blueprint.name,\r\n      fields: blueprint.fields.map((field) => {\r\n        const contractField: ContractField = {\r\n          fieldId: field.id,\r\n          fieldLabel: field.label,\r\n          fieldType: field.type,\r\n          value: field.type === 'CHECKBOX' ? false : '',\r\n        };\r\n        return contractField;\r\n      }),\r\n      status: 'CREATED',\r\n      createdAt: now,\r\n      updatedAt: now,\r\n    };\r\n    set((state) => ({ contracts: [...state.contracts, contract] }));\r\n    return contract;\r\n  },\r\n\r\n  updateContractField: (contractId, fieldId, value) => {\r\n    set((state) => {\r\n      const contracts = state.contracts.map((contract) => {\r\n        if (contract.id !== contractId) {\r\n          return contract;\r\n        }\r\n        if (contract.status === 'LOCKED' || contract.status === 'REVOKED') {\r\n          return contract;\r\n        }\r\n        const fields = contract.fields.map((field) =>\r\n          field.fieldId === fieldId ? { ...field, value } : field,\r\n        );\r\n        return { ...contract, fields, updatedAt: new Date() };\r\n      });\r\n      return { contracts };\r\n    });\r\n  },\r\n\r\n  updateContractStatus: (contractId, status) => {\r\n    set((state) => {\r\n      const order: ContractStatus[] = [\r\n        'CREATED',\r\n        'APPROVED',\r\n        'SENT',\r\n        'SIGNED',\r\n        'LOCKED',\r\n      ];\r\n\r\n      const contracts = state.contracts.map((contract) => {\r\n        if (contract.id !== contractId) {\r\n          return contract;\r\n        }\r\n        if (contract.status === 'LOCKED' || contract.status === 'REVOKED') {\r\n          return contract;\r\n        }\r\n\r\n        if (status === 'REVOKED') {\r\n          const allowed = contract.status === 'CREATED' || contract.status === 'SENT';\r\n          if (!allowed) {\r\n            return contract;\r\n          }\r\n          return { ...contract, status, updatedAt: new Date() };\r\n        }\r\n\r\n        const currentIndex = order.indexOf(contract.status);\r\n        const nextIndex = order.indexOf(status);\r\n        const isNextStep = nextIndex === currentIndex + 1;\r\n        if (!isNextStep) {\r\n          return contract;\r\n        }\r\n\r\n        return { ...contract, status, updatedAt: new Date() };\r\n      });\r\n      return { contracts };\r\n    });\r\n  },\r\n\r\n  getContract: (id) => get().contracts.find((ct) => ct.id === id),\r\n\r\n  getContractsByStatus: (status) =>\r\n    get().contracts.filter((ct) => ct.status === status),\r\n}));\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}